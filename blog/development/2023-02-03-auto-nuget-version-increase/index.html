<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to increase nuget package version automatically with Github Actions | mgorbatyuk.dev</title><meta name=keywords content=".net,nuget,ci/cd,github,tutorial"><meta name=description content="When you push new nugets to nuget.org, you need to increase the version of the package. This article describes how to do it automatically with Github Actions."><meta name=author content="Maxim Gorbatyuk"><link rel=canonical href=https://mgorbatyuk.dev/blog/development/2023-02-03-auto-nuget-version-increase/><link crossorigin=anonymous href=/assets/css/stylesheet.0107096c04c5eb444a93e43004b04ce0744d54d1985e348d014361e3096f38ed.css integrity="sha256-AQcJbATF60RKk+QwBLBM4HRNVNGYXjSNAUNh4wlvOO0=" rel="preload stylesheet" as=style><link rel=icon href=https://mgorbatyuk.dev/images/avatar.png><link rel=icon type=image/png sizes=16x16 href=https://mgorbatyuk.dev/images/avatar.png><link rel=icon type=image/png sizes=32x32 href=https://mgorbatyuk.dev/images/avatar.png><link rel=apple-touch-icon href=https://mgorbatyuk.dev/images/avatar.png><link rel=mask-icon href=https://mgorbatyuk.dev/images/avatar.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://mgorbatyuk.dev/blog/development/2023-02-03-auto-nuget-version-increase/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-0T63X4Y3MJ"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0T63X4Y3MJ")}</script><meta property="og:title" content="How to increase nuget package version automatically with Github Actions"><meta property="og:description" content="When you push new nugets to nuget.org, you need to increase the version of the package. This article describes how to do it automatically with Github Actions."><meta property="og:type" content="article"><meta property="og:url" content="https://mgorbatyuk.dev/blog/development/2023-02-03-auto-nuget-version-increase/"><meta property="og:image" content="https://mgorbatyuk.dev/images/avatar.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-02-03T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-03T00:00:00+00:00"><meta property="og:site_name" content="mgorbatyuk.dev"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mgorbatyuk.dev/images/avatar.png"><meta name=twitter:title content="How to increase nuget package version automatically with Github Actions"><meta name=twitter:description content="When you push new nugets to nuget.org, you need to increase the version of the package. This article describes how to do it automatically with Github Actions."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://mgorbatyuk.dev/blog/"},{"@type":"ListItem","position":2,"name":"How to increase nuget package version automatically with Github Actions","item":"https://mgorbatyuk.dev/blog/development/2023-02-03-auto-nuget-version-increase/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to increase nuget package version automatically with Github Actions","name":"How to increase nuget package version automatically with Github Actions","description":"When you push new nugets to nuget.org, you need to increase the version of the package. This article describes how to do it automatically with Github Actions.","keywords":[".net","nuget","ci/cd","github","tutorial"],"articleBody":"Why do you need to increase the version of the nuget package? When you push a new nuget package to nuget.org, you need to increase the version of the package. Otherwise, you will get an error. I will show you how to do it automatically with Github Actions. As an example, I will use my nuget package MaximGorbatyuk.DatabaseSqlEndpoints.\nTL;DR You need github.run_number variable to increase the version, The release.yml file as example for you, Code example - MaximGorbatyuk.DatabaseSqlEndpoints. Workflow Usually, I use the following workflow:\nWork on a feature in a separate branch. For example, feature/1234-add-new-feature. Create a pull request to the dev branch. Code in the pull request is tested by Github Actions CI. If the tests are successful, the pull request is merged to the dev branch by me. If I decide to deply new version of nuget, I merge the dev branch to the main branch. New code in the main branch is used for building nuget package. the nuget package is deployed to nuget.org. For automatic version increase, I use a little hack. Github has run_number variable that represents the order number of the pipeline run. I use this number as last version number of the nuget package.\nThe main problem is how to put this number into the csproj file. Here I use a sed command to replace the version number in the csproj file inside 1.0.0. The sed command looks like this:\nsed -i \"s/\\(\\([0-9]\\+\\.\\)\\{2\\}\\)\\([0-9]\\+\\)/\\1${{github.run_number}}/\" ${{env.PROJECT_FILE}} For example, the version is 1.0.0 and the github.run_number is 5. The result will be 1.0.5. That’s what I need. Let’s see how to use it in Github Actions.\nHow to setup repository First of all, you need to add two yml files to your repository:\ntest.yml release.yml The first one test.yml will be responsible for testing the code. The second one release.yml will be responsible for building the nuget package and deploying it to nuget.org.\nThe test.yml is very simple. It looks like this:\nname: Build and test on: push: branches: [dev] # run tests on push to dev branch pull_request: branches: [dev] # OR run tests on pull requests to dev branch jobs: Test: runs-on: ubuntu-latest env: solution-file: MaximGorbatyuk.DatabaseSqlEndpoints.sln steps: - uses: actions/checkout@v2 - name: Backend build and test uses: actions/setup-dotnet@v1 with: dotnet-version: \"6.0.x\" # SDK Version to use. - name: Install dependencies # installing dependencies for all projects in the solution run: dotnet restore ${{env.solution-file}} - name: Test # running tests for all projects in the solution run: dotnet test ${{env.solution-file}} --no-restore --verbosity normal The release.yml is a bit more complicated. It looks like this:\nname: Publish nuget on: push: branches: [main] # run deployment on push to main branch jobs: build: runs-on: ubuntu-latest timeout-minutes: 15 env: project: MaximGorbatyuk.DatabaseSqlEndpoints PROJECT_FOLDER: ./MaximGorbatyuk.DatabaseSqlEndpoints PROJECT_FILE: MaximGorbatyuk.DatabaseSqlEndpoints/MaximGorbatyuk.DatabaseSqlEndpoints.csproj steps: - name: Checkout uses: actions/checkout@v2 - name: Setup .NET Core uses: actions/setup-dotnet@v1 with: dotnet-version: \"6.0.x\" # .NET SDK version to use. # github.run_number is a number of the pipeline run. It is increased automatically. # That's why we can use it to increase the version of the nuget package. # Here we replace the last number in the version with github.run_number. - name: Set version run: | echo \"Buid version is ${{github.run_number}}\" sed -i \"s/\\(\\([0-9]\\+\\.\\)\\{2\\}\\)\\([0-9]\\+\\)/\\1${{github.run_number}}/\" ${{env.PROJECT_FILE}} - name: Build working-directory: ${{env.PROJECT_FOLDER}} run: dotnet build --configuration Release - name: Pack working-directory: ${{env.PROJECT_FOLDER}} run: dotnet pack --configuration Release --no-build --output . # Here we use external public config file to publish nuget package. # The script needs to know the path to the csproj file and the nuget API key. - name: Publish nuget package uses: brandedoutcast/publish-nuget@v2.5.2 with: PROJECT_FILE_PATH: ${{env.PROJECT_FILE}} NUGET_KEY: ${{secrets.NUGET_API_KEY}} The NUGET_API_KEY is a Github secret variable that contains the API key for nuget.org. Here you can learn how to get it. Here is a screenshot of the secret variable in my repository:\nThat’s all. Now you can push your code to the dev branch and it will be tested by Github Actions. When you are ready to deploy new version of nuget package, you need to merge the dev branch to the main branch. After that, the release.yml will be triggered and the new version of the nuget package will be deployed to nuget.org.\nIf you want to use the same approach in Gitlab CI, you may use CI_PIPELINE_IID variable instead of github.run_number. It represents the project-level IID (internal ID) of the current pipeline as well as github.run_number in Github Actions.\nI hope this tutorial will be useful for you. If you have any questions, you may find my contacts here.\n","wordCount":"751","inLanguage":"en","image":"https://mgorbatyuk.dev/images/avatar.png","datePublished":"2023-02-03T00:00:00Z","dateModified":"2023-02-03T00:00:00Z","author":{"@type":"Person","name":"Maxim Gorbatyuk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mgorbatyuk.dev/blog/development/2023-02-03-auto-nuget-version-increase/"},"publisher":{"@type":"Organization","name":"mgorbatyuk.dev","logo":{"@type":"ImageObject","url":"https://mgorbatyuk.dev/images/avatar.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://mgorbatyuk.dev/ accesskey=h title="mgorbatyuk.dev (Alt + H)"><img src=https://mgorbatyuk.dev/images/avatar.png alt aria-label=logo height=35>mgorbatyuk.dev</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://mgorbatyuk.dev/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://mgorbatyuk.dev/about/ title="About me"><span>About me</span></a></li><li><a href=https://mgorbatyuk.dev/archive/ title=Archive><span>Archive</span></a></li><li><a href=https://mgorbatyuk.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">How to increase nuget package version automatically with Github Actions</h1><div class=post-description>When you push new nugets to nuget.org, you need to increase the version of the package. This article describes how to do it automatically with Github Actions.</div><div class=post-meta><span title='2023-02-03 00:00:00 +0000 UTC'>February 3, 2023</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Maxim Gorbatyuk</div></header><div class=post-content><p>Why do you need to increase the version of the nuget package? When you push a new nuget package to nuget.org, you need to increase the version of the package. Otherwise, you will get an error. I will show you how to do it automatically with Github Actions. As an example, I will use my nuget package <a href=https://github.com/maximgorbatyuk/MaximGorbatyuk.DatabaseSqlEndpoints>MaximGorbatyuk.DatabaseSqlEndpoints</a>.</p><h2 id=tldr>TL;DR<a hidden class=anchor aria-hidden=true href=#tldr>#</a></h2><ul><li>You need <code>github.run_number</code> variable to increase the version,</li><li>The <a href=https://github.com/maximgorbatyuk/MaximGorbatyuk.DatabaseSqlEndpoints/blob/dev/.github/workflows/release.yml>release.yml</a> file as example for you,</li><li>Code example - <a href=https://github.com/maximgorbatyuk/MaximGorbatyuk.DatabaseSqlEndpoints>MaximGorbatyuk.DatabaseSqlEndpoints</a>.</li></ul><h2 id=workflow>Workflow<a hidden class=anchor aria-hidden=true href=#workflow>#</a></h2><p>Usually, I use the following workflow:</p><ol><li>Work on a feature in a separate branch. For example, <code>feature/1234-add-new-feature</code>.</li><li>Create a pull request to the <code>dev</code> branch.</li><li>Code in the pull request is tested by Github Actions CI.</li><li>If the tests are successful, the pull request is merged to the <code>dev</code> branch by me.</li><li>If I decide to deply new version of nuget, I merge the <code>dev</code> branch to the <code>main</code> branch.</li><li>New code in the <code>main</code> branch is used for building nuget package.</li><li>the nuget package is deployed to nuget.org.</li></ol><p>For automatic version increase, I use a little hack. Github has run_number variable that represents the order number of the pipeline run. I use this number as last version number of the nuget package.</p><p>The main problem is how to put this number into the csproj file. Here I use a <a href=https://www.geeksforgeeks.org/sed-command-in-linux-unix-with-examples/>sed</a> command to replace the version number in the csproj file inside <code>&lt;Version>1.0.0&lt;/Version></code>. The sed command looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#e6db74>&#34;s/\(&lt;Version&gt;\([0-9]\+\.\)\{2\}\)\([0-9]\+\)/\1</span><span style=color:#e6db74>${</span>{github.run_number<span style=color:#e6db74>}</span><span style=color:#e6db74>}/&#34;</span> <span style=color:#e6db74>${</span>{env.PROJECT_FILE<span style=color:#e6db74>}</span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>For example, the version is <code>1.0.0</code> and the <code>github.run_number</code> is <code>5</code>. The result will be <code>1.0.5</code>. That&rsquo;s what I need. Let&rsquo;s see how to use it in Github Actions.</p><h2 id=how-to-setup-repository>How to setup repository<a hidden class=anchor aria-hidden=true href=#how-to-setup-repository>#</a></h2><p>First of all, you need to add two yml files to your repository:</p><ul><li><code>test.yml</code></li><li><code>release.yml</code></li></ul><p>The first one <a href=https://github.com/maximgorbatyuk/MaximGorbatyuk.DatabaseSqlEndpoints/blob/dev/.github/workflows/test.yml>test.yml</a> will be responsible for testing the code. The second one <a href=https://github.com/maximgorbatyuk/MaximGorbatyuk.DatabaseSqlEndpoints/blob/dev/.github/workflows/release.yml>release.yml</a> will be responsible for building the nuget package and deploying it to nuget.org.</p><p>The <code>test.yml</code> is very simple. It looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build and test</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [<span style=color:#ae81ff>dev]</span> <span style=color:#75715e># run tests on push to dev branch</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pull_request</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [<span style=color:#ae81ff>dev]</span> <span style=color:#75715e># OR run tests on pull requests to dev branch</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>Test</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>solution-file</span>: <span style=color:#ae81ff>MaximGorbatyuk.DatabaseSqlEndpoints.sln</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Backend build and test</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-dotnet@v1</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>dotnet-version</span>: <span style=color:#e6db74>&#34;6.0.x&#34;</span> <span style=color:#75715e># SDK Version to use.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Install dependencies</span> <span style=color:#75715e># installing dependencies for all projects in the solution</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>dotnet restore ${{env.solution-file}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Test</span> <span style=color:#75715e># running tests for all projects in the solution</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>dotnet test ${{env.solution-file}} --no-restore --verbosity normal</span>
</span></span></code></pre></div><p>The <code>release.yml</code> is a bit more complicated. It looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Publish nuget</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [<span style=color:#ae81ff>main]</span> <span style=color:#75715e># run deployment on push to main branch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>timeout-minutes</span>: <span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>project</span>: <span style=color:#ae81ff>MaximGorbatyuk.DatabaseSqlEndpoints</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>PROJECT_FOLDER</span>: <span style=color:#ae81ff>./MaximGorbatyuk.DatabaseSqlEndpoints</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>PROJECT_FILE</span>: <span style=color:#ae81ff>MaximGorbatyuk.DatabaseSqlEndpoints/MaximGorbatyuk.DatabaseSqlEndpoints.csproj</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup .NET Core</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-dotnet@v1</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>dotnet-version</span>: <span style=color:#e6db74>&#34;6.0.x&#34;</span> <span style=color:#75715e># .NET SDK version to use.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># github.run_number is a number of the pipeline run. It is increased automatically.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># That&#39;s why we can use it to increase the version of the nuget package.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Here we replace the last number in the version with github.run_number.</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Set version</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>       echo &#34;Buid version is ${{github.run_number}}&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>       sed -i &#34;s/\(&lt;Version&gt;\([0-9]\+\.\)\{2\}\)\([0-9]\+\)/\1${{github.run_number}}/&#34; ${{env.PROJECT_FILE}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>working-directory</span>: <span style=color:#ae81ff>${{env.PROJECT_FOLDER}}</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: <span style=color:#ae81ff>dotnet build --configuration Release</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Pack</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>working-directory</span>: <span style=color:#ae81ff>${{env.PROJECT_FOLDER}}</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: <span style=color:#ae81ff>dotnet pack --configuration Release --no-build --output .</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Here we use external public config file to publish nuget package.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The script needs to know the path to the csproj file and the nuget API key.</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Publish nuget package</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>brandedoutcast/publish-nuget@v2.5.2</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>PROJECT_FILE_PATH</span>: <span style=color:#ae81ff>${{env.PROJECT_FILE}}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>NUGET_KEY</span>: <span style=color:#ae81ff>${{secrets.NUGET_API_KEY}}</span>
</span></span></code></pre></div><p>The <code>NUGET_API_KEY</code> is a Github secret variable that contains the API key for nuget.org. <a href=https://learn.microsoft.com/en-us/nuget/nuget-org/publish-a-package>Here</a> you can learn how to get it. Here is a screenshot of the secret variable in my repository:</p><p><img src=/images/blog/development/2023-02-03/github_secrets.png alt="Nuget API key as secret"></p><p>That&rsquo;s all. Now you can push your code to the <code>dev</code> branch and it will be tested by Github Actions. When you are ready to deploy new version of nuget package, you need to merge the <code>dev</code> branch to the <code>main</code> branch. After that, the <code>release.yml</code> will be triggered and the new version of the nuget package will be deployed to nuget.org.</p><p>If you want to use the same approach in <a href=https://docs.gitlab.com/ee/ci/variables/predefined_variables.html>Gitlab CI</a>, you may use <code>CI_PIPELINE_IID</code> variable instead of <code>github.run_number</code>. It represents the project-level IID (internal ID) of the current pipeline as well as github.run_number in Github Actions.</p><p>I hope this tutorial will be useful for you. If you have any questions, you may find my contacts <a href=https://maximgorbatyuk.com/about/#where-you-can-find-me>here</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://mgorbatyuk.dev/tags/.net/>.Net</a></li><li><a href=https://mgorbatyuk.dev/tags/nuget/>Nuget</a></li><li><a href=https://mgorbatyuk.dev/tags/ci/cd/>Ci/Cd</a></li><li><a href=https://mgorbatyuk.dev/tags/github/>Github</a></li><li><a href=https://mgorbatyuk.dev/tags/tutorial/>Tutorial</a></li></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share How to increase nuget package version automatically with Github Actions on x" href="https://x.com/intent/tweet/?text=How%20to%20increase%20nuget%20package%20version%20automatically%20with%20Github%20Actions&amp;url=https%3a%2f%2fmgorbatyuk.dev%2fblog%2fdevelopment%2f2023-02-03-auto-nuget-version-increase%2f&amp;hashtags=.net%2cnuget%2cci%2fcd%2cgithub%2ctutorial"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to increase nuget package version automatically with Github Actions on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmgorbatyuk.dev%2fblog%2fdevelopment%2f2023-02-03-auto-nuget-version-increase%2f&amp;title=How%20to%20increase%20nuget%20package%20version%20automatically%20with%20Github%20Actions&amp;summary=How%20to%20increase%20nuget%20package%20version%20automatically%20with%20Github%20Actions&amp;source=https%3a%2f%2fmgorbatyuk.dev%2fblog%2fdevelopment%2f2023-02-03-auto-nuget-version-increase%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to increase nuget package version automatically with Github Actions on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fmgorbatyuk.dev%2fblog%2fdevelopment%2f2023-02-03-auto-nuget-version-increase%2f&title=How%20to%20increase%20nuget%20package%20version%20automatically%20with%20Github%20Actions"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to increase nuget package version automatically with Github Actions on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmgorbatyuk.dev%2fblog%2fdevelopment%2f2023-02-03-auto-nuget-version-increase%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to increase nuget package version automatically with Github Actions on whatsapp" href="https://api.whatsapp.com/send?text=How%20to%20increase%20nuget%20package%20version%20automatically%20with%20Github%20Actions%20-%20https%3a%2f%2fmgorbatyuk.dev%2fblog%2fdevelopment%2f2023-02-03-auto-nuget-version-increase%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to increase nuget package version automatically with Github Actions on telegram" href="https://telegram.me/share/url?text=How%20to%20increase%20nuget%20package%20version%20automatically%20with%20Github%20Actions&amp;url=https%3a%2f%2fmgorbatyuk.dev%2fblog%2fdevelopment%2f2023-02-03-auto-nuget-version-increase%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to increase nuget package version automatically with Github Actions on ycombinator" href="https://news.ycombinator.com/submitlink?t=How%20to%20increase%20nuget%20package%20version%20automatically%20with%20Github%20Actions&u=https%3a%2f%2fmgorbatyuk.dev%2fblog%2fdevelopment%2f2023-02-03-auto-nuget-version-increase%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><style>.footer-custom{background-color:#2d2d2d;color:#e0e0e0;padding:2.5rem 1rem 1.5rem;width:100%;max-width:none;margin:0;box-sizing:border-box}.footer-container{max-width:900px;margin:0 auto}.footer-columns{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem;text-align:left}.footer-column-title{color:#fff;font-size:.875rem;font-weight:600;margin:0 0 1rem;text-transform:uppercase;letter-spacing:.05em}.footer-nav{display:flex;flex-direction:column;gap:.5rem;align-items:flex-start}.footer-link{color:#a0a0a0!important;text-decoration:none!important;transition:color .2s;font-size:.875rem;display:inline}.footer-link:hover{color:#fff!important}.footer-bottom{border-top:1px solid #404040;padding-top:1rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.footer-copyright{color:gray;font-size:.75rem}.footer-copyright a{color:#a0a0a0;text-decoration:none}.footer-powered{color:#606060;font-size:.75rem}.footer-powered a{color:gray;text-decoration:none}</style><footer class="footer footer-custom"><div class=footer-container><div class=footer-columns><div><h4 class=footer-column-title>Navigation</h4><nav class=footer-nav><a href=/blog/ class=footer-link>Blog</a>
<a href=/about/ class=footer-link>About me</a>
<a href=/speaking/ class=footer-link>Public speaking</a>
<a href=/archive/ class=footer-link>Archive</a>
<a href=/search/ class=footer-link>Search</a>
<a href=/sitemap.xml class=footer-link target=_blank>sitemap.xml</a></nav></div><div><h4 class=footer-column-title>Projects</h4><nav class=footer-nav><a href="https://techinterview.space?source=mgorbatyuk.dev" class=footer-link target=_blank>techinterview.space</a>
<a href="https://mgorbatyuk.dev/ev-charging-tracker?source=mgorbatyuk.dev" class=footer-link target=_blank>EV Charge Tracker (iOS)</a>
<a href="https://mgorbatyuk.dev/journey-wallet?source=mgorbatyuk.dev" class=footer-link target=_blank>Journey Wallet (iOS)</a>
<a href="https://maximgorbatyuk.notion.site/ip-kazakhstan-tutorial?source=mgorbatyuk.dev" class=footer-link target=_blank>Шпаргалка по ИП в Казахстане</a></nav></div><div><h4 class=footer-column-title>Connect</h4><nav class=footer-nav><a href="https://github.com/maximgorbatyuk?source=mgorbatyuk.dev" class=footer-link target=_blank rel=noopener>GitHub</a>
<a href="https://t.me/maximgorbatyuk?source=mgorbatyuk.dev" class=footer-link target=_blank rel=noopener>Telegram</a>
<a href="https://instagram.com/maxim.gorbatyuk?source=mgorbatyuk.dev" class=footer-link target=_blank rel=noopener>Инста личная</a>
<a href="https://instagram.com/mgorbatyuk.jpeg?source=mgorbatyuk.dev" class=footer-link target=_blank rel=noopener>Инста фотографа/видеографа</a></nav></div></div><div class=footer-bottom><span class=footer-copyright>&copy; 2026 <a href=https://mgorbatyuk.dev/>mgorbatyuk.dev</a></span>
<span class=footer-powered>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></div></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>